!function(){"use strict";class e{constructor(e){this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".modal__close-button")}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("click",(e=>{e.target===this._popup&&this.close()}))}}class t extends e{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector(".modal__form")}_getInputValues(){const e={};return[...this._form.querySelectorAll(".modal__input")].forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())}))}close(){super.close(),this._form.reset()}}const s={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class n{constructor(e,t){this._settings=e,this._formEl=t,this.inputElms=[...this._formEl.querySelectorAll(e.inputSelector)],this.submitButton=this._formEl.querySelector(e.submitButtonSelector)}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.textContent="",t.classList.remove(this._settings.errorClass)}_checkInputValidity(e){return e.validity.valid?(this._hideInputError(e),!0):(this._showInputError(e),!1)}toggleButtonState(){this._checkFormValidity()?(this.submitButton.classList.remove(this._settings.inactiveButtonClass),this.submitButton.removeAttribute("disabled")):(this.submitButton.classList.add(this._settings.inactiveButtonClass),this.submitButton.setAttribute("disabled",!0))}_checkFormValidity(){return this.inputElms.every((e=>e.validity.valid))}_setEventListeners(){this.inputElms.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners(),this.toggleButtonState()}resetValidation(){this.inputElms.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}}class o{constructor(e,t,s){let{name:n,link:o,alt:r}=e;this._name=n,this._link=o,this._alt=r,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this._link,this._alt,this._name)}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}getView(){this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0);const e=this._cardElement.querySelector(".card__image"),t=this._cardElement.querySelector(".card__text");return e.setAttribute("src",this._link),e.setAttribute("alt",this._alt),t.textContent=this._name,this._setEventListeners(),this._cardElement}}const r=document.querySelector(".profile__edit-button"),i=(document.querySelector(".profile__name"),document.querySelector(".profile__description"),document.querySelector(".profile__add-button")),a=(e,t,s)=>{_.open({link:e,alt:t,name:s})},l=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__description"}),c=e=>{const t=new o(e,"#card-template",a).getView();u.addItem(t)},u=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"A picture of Yosemite Valley"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"A picture of Lake Louise"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"A picture of the Bald Mountians"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"A picture of Latemar"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg",alt:"A picture of the Vanoise National Park"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg",alt:"A picture of Lago di Braies"}].reverse(),renderer:c},".cards__list");u.renderItems();const d=new t("#modal-add-card",(e=>{c({name:e.title,link:e.url,alt:e.title}),d.close()}));d.setEventListeners();const m=new t("#modal-edit-profile",(e=>{l.setUserInfo(e.name,e.description),m.close()}));m.setEventListeners();const _=new class extends e{constructor(e){super(e),this._modalImage=this._popup.querySelector(".modal__card_image"),this._modalFooter=this._popup.querySelector(".modal__image_footer")}open(e){let{link:t,alt:s,name:n}=e;this._modalImage.src=t,this._modalImage.alt=s,this._modalFooter.textContent=n,super.open()}}("#modal-image-inspect");_.setEventListeners();const h=document.querySelector("#profile-name-input"),p=document.querySelector("#profile-description-input");r.addEventListener("click",(()=>{const e=l.getUserInfo();h.value=e.name,p.value=e.job,m.open()}));const E=new n(s,document.querySelector("#modal-add-card .modal__form"));E.enableValidation(),i.addEventListener("click",(()=>{E.toggleButtonState(),d.open()})),document.querySelectorAll(s.formSelector).forEach((e=>{new n(s,e).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fcG9wdXApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgdmFsdWVzID0ge307XHJcbiAgICBjb25zdCBpbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKV07XHJcbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgICBhbHQ6IFwiQSBwaWN0dXJlIG9mIFlvc2VtaXRlIFZhbGxleVwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkEgcGljdHVyZSBvZiBMYWtlIExvdWlzZVwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkEgcGljdHVyZSBvZiB0aGUgQmFsZCBNb3VudGlhbnNcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgICBhbHQ6IFwiQSBwaWN0dXJlIG9mIExhdGVtYXJcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICAgIGFsdDogXCJBIHBpY3R1cmUgb2YgdGhlIFZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgICBhbHQ6IFwiQSBwaWN0dXJlIG9mIExhZ28gZGkgQnJhaWVzXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcclxuICAgIHRoaXMuaW5wdXRFbG1zID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGNvbnN0IGlzVmFsaWQgPSB0aGlzLl9jaGVja0Zvcm1WYWxpZGl0eSgpO1xyXG5cclxuICAgIGlmIChpc1ZhbGlkKSB7XHJcbiAgICAgIHRoaXMuc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY2hlY2tGb3JtVmFsaWRpdHkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbnB1dEVsbXMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5pbnB1dEVsbXMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLmlucHV0RWxtcy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmssIGFsdCB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9hbHQgPSBhbHQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2xpbmssIHRoaXMuX2FsdCwgdGhpcy5fbmFtZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICBjb25zdCBjYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBjYXJkVGV4dEVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190ZXh0XCIpO1xyXG5cclxuICAgIGNhcmRJbWFnZUVsLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLl9saW5rKTtcclxuICAgIGNhcmRJbWFnZUVsLnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLl9hbHQpO1xyXG4gICAgY2FyZFRleHRFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvbkNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9jYXJkLmpzXCI7XHJcblxyXG4vLyBTZWxlY3RvcnNcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8vIEluc3RhbmNlc1xyXG5cclxuY29uc3QgaGFuZGxlSW1hZ2VDbGljayA9IChsaW5rLCBhbHQsIG5hbWUpID0+IHtcclxuICBpbWFnZVBvcHVwLm9wZW4oeyBsaW5rLCBhbHQsIG5hbWUgfSk7XHJcbn07XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdldFZpZXcoKTtcclxuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufTtcclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcy5yZXZlcnNlKCksXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNtb2RhbC1hZGQtY2FyZFwiLCAoZm9ybURhdGEpID0+IHtcclxuICByZW5kZXJDYXJkKHsgbmFtZTogZm9ybURhdGEudGl0bGUsIGxpbms6IGZvcm1EYXRhLnVybCwgYWx0OiBmb3JtRGF0YS50aXRsZSB9KTtcclxuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxufSk7XHJcblxyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNtb2RhbC1lZGl0LXByb2ZpbGVcIixcclxuICAoZm9ybURhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGZvcm1EYXRhLm5hbWUsIGZvcm1EYXRhLmRlc2NyaXB0aW9uKTtcclxuICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICB9XHJcbik7XHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjbW9kYWwtaW1hZ2UtaW5zcGVjdFwiKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG4vLyBFdmVudCBMaXN0ZW5lcnNcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5qb2I7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtYWRkLWNhcmQgLm1vZGFsX19mb3JtXCIpXHJcbik7XHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8gRm9ybSB2YWxpZGF0aW9uIHNldHVwXHJcbmRvY3VtZW50XHJcbiAgLnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3IpXHJcbiAgLmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBmb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FyZF9pbWFnZVwiKTtcclxuICAgIHRoaXMuX21vZGFsRm9vdGVyID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VfZm9vdGVyXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IGxpbmssIGFsdCwgbmFtZSB9KSB7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlLmFsdCA9IGFsdDtcclxuICAgIHRoaXMuX21vZGFsRm9vdGVyLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlBvcHVwIiwiY29uc3RydWN0b3IiLCJwb3B1cFNlbGVjdG9yIiwidGhpcyIsIl9wb3B1cCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9jbG9zZUJ1dHRvbiIsIm9wZW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsIiwiX3NldHRpbmdzIiwiX2Zvcm1FbCIsImlucHV0RWxtcyIsInN1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJldmVyeSIsIl9zZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicmVzZXRWYWxpZGF0aW9uIiwiQ2FyZCIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibGluayIsImFsdCIsIl9uYW1lIiwiX2xpbmsiLCJfYWx0IiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRFbGVtZW50IiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJ0b2dnbGUiLCJnZXRWaWV3IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZUVsIiwiY2FyZFRleHRFbCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImltYWdlUG9wdXAiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJyZW5kZXJDYXJkIiwiaXRlbSIsImNhcmRFbGVtZW50IiwiY2FyZExpc3QiLCJhZGRJdGVtIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZXZlcnNlIiwiYWRkQ2FyZFBvcHVwIiwiZm9ybURhdGEiLCJ0aXRsZSIsInVybCIsImVkaXRQcm9maWxlUG9wdXAiLCJfbW9kYWxJbWFnZSIsIl9tb2RhbEZvb3RlciIsInNyYyIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImN1cnJlbnRVc2VySW5mbyIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9